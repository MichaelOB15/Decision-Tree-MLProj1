# CSDS 440 Group Repository Template

This repository is what all CSDS 440 groups will start with.

Author: Robbie Dozier (grd27)

## Contents

### `.gitignore` File

The `.gitignore` file is a good way to make sure you don't accidentally commit files that shouldn't be on GitHub.

### `notebooks/` folder

The `notebooks` folder is where you can store your Jupyter notebooks. Jupyter is a great tool for making project
writeups and reports, as well as testing code on the fly.

### `src` and `test`

All of your source code should be in `src`. **Failing to do this can result in a grading penalty.**

`test` is where you can write unit tests and other testing code.

### `environment.yml`

**Do not edit this file!** This file defines your conda virtual environment, and also lists the libraries that are
installed and you are allowed to use. **You are not permitted to use any other libraries in your assignments.**

## Setup Tutorial

This is a tutorial for cloning your repository and setting your coding environment up. The entire process should take
less than 60 minutes.

### Prerequisites

Before starting, ensure you have the following:

- A GitHub account linked to `cwru-all`
- Python 3 and Git installed on your computer.
- Knowledge of basic bash commands (`ls`, `cd`, etc.)

### Part 0: Installing PyCharm

*This is optional, but highly recommended.* You may use any IDE you like, but it will be assumed for the rest of this
tutorial that you are using PyCharm.

1. Go to the PyCharm [webpage.](https://www.jetbrains.com/pycharm/)
2. You may either download the Community Edition of PyCharm for free, or you can verify your status as a student and get
   all JetBrains professional products for free, including PyCharm professional.
3. Install PyCharm.

### Part 1: Setting up GitHub Credentials, Cloning Repository

CWRU uses SSO (Single sign-on) for Github credentials.

1. In your PyCharm Preferences, go to *Version Control* â†’ *GitHub*.
2. Click the plus "+" button and select *Log In with Token...* (If you already have a GitHub token linked to your
   account, you do not need a new one. Skip to step 7.)
3. Click *Generate*. This will open a web browser and possibly prompt you to log into GitHub.
4. After logging in, click *Generate Token* at the bottom of the page.
5. You will see a message saying `Make sure to copy your personal access token now. You wonâ€™t be able to see it again!`.
   Click on the clipboard icon to copy the token or select and copy it by hand. **Do not close the page.**
6. Go back to PyCharm and paste the token into the *Token* field. Click *Add Account*.

*You have now enabled GitHub with PyCharm, and you can make commits and pull/push directly from PyCharm.*

Now we need to enable SSO (either follow steps 7-10 or
use [this guide:](https://docs.github.com/en/github/authenticating-to-github/authenticating-with-saml-single-sign-on/authorizing-a-personal-access-token-for-use-with-saml-single-sign-on)

7. Go back to the GitHub page, and click the "Enable SSO" button next to your token.
8. Click *Authorize*.
9. Click *Continue* and sign in with your Case ID.
10. You should get a message saying that the token is now authorized with SSO. Click *Continue*.

*Now this token is authorized to push/pull from CWRU-managed repositories.*

Next, we must create SSH keys. (You may skip this part if you don't mind entering in your login credentials every time
you want to push or pull, or if you've already created SSH keys and added them to your GitHub account.)

11. [Check your computer to see if you already have an SSH key pair.](https://www.techrepublic.com/article/how-to-view-your-ssh-keys-in-linux-macos-and-windows/)
12. If you do not have an SSH key
    pair, [create one.](https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)
13. Now that you have an SSH key,
    follow [these steps](https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account)
    to add the public key to your GitHub account.
    **Make sure you copy and paste the PUBLIC key, NEVER share your PRIVATE key!**
14. Once you SSH key has been
    added, [authorize it with SSO.](https://docs.github.com/en/github/authenticating-to-github/authenticating-with-saml-single-sign-on/authorizing-an-ssh-key-for-use-with-saml-single-sign-on)

Finally, we can clone our repository.

15. Go to the github page for your group's repository, located at
    `https://github.com/cwru-all/CSDS440-s21-[your group number]`.
16. Using your preferred method (your IDE, the GitHub CLI, etc.), clone the repository. If you followed all the steps
    correctly so far, you should get no errors, and you should not be asked to provide your GitHub credentials. Just
    make sure you use SSH to clone the repository. If you've never done that before, it's easy:
    1. Click *Code* â†’ *SSH* and copy the text in the box (starting with `git@github.com...`)
    2. Go into a terminal (git terminal if you are on Windows) and navigate to the directory where you want the repo to
       be. Type `git clone ` and then paste. Hit enter.
17. You should now have a version of this repository on your computer! Yay! ðŸŽ‰
18. To test that everything is working properly, open up the repository on your IDE. (In PyCharm, simply *Open...* and
    open the repo folder.)
19. Create a text file and try to commit and push it. If you've never used git before or you need a refresher,
    [this](https://rogerdudler.github.io/git-guide/) is a good tutorial. **DO NOT wait until your first project is due
    to learn how to use git!**
20. Lastly, let's create our data folder. Download and unzip the `440data` directory from canvas and move it to your
    repository root. Note that the `440data/` directory will be ignored by git, but that's okay because committing
    datasets and other non-source files is usually bad practice.

### Part 3: Setting Up Your Conda Environment

`conda` is a great way to make managing dependencies and packages easy. If you've used `pip` or `virtualenv` before,
it's very similar.

#### What is a virtual environment and why do I need one?

You've probably experienced the frustration of needing different versions of different packages/libraries for each
coding project you do. Virtual environments fix this problem by providing you with a fresh copy of Python and all the
libraries you need for a *single project*.

We have provided in the repository a file called `environment.yml` which will allow you to install our ML framework
`sting`, as well as all of the libraries you will be allowed to use. **You are not permitted to edit this file or
install other libraries**.

1. First we need to install `conda`. If you already have conda installed you may skip this step.
    1. Install the latest version of either [Anaconda](https://www.anaconda.com/products/individual) or
       [miniconda](https://docs.conda.io/en/latest/miniconda.html). Anaconda is simply the `conda` package manager with
       some extra software preinstalled.
    2. If you are on macOS or Linux, open a Terminal. If you are on Windows, search for and open Anaconda Prompt.
    3. Verify you have the latest version of `conda` by running `conda --version`.
    4. Run the command `conda list` to see all the packages you have installed.
2. Now that `conda` is installed we can set up our environment. Navigate to your repository and run the following
   command: `conda env create --file environment.yml`. If the command fails, it may be due to one or more of the
   following reasons:
    1. You did not run the command from your repository root (`CSDS440-s21-[your group number]`)
    2. You did not install `conda` correctly
    3. Your GitHub token or SSH key is not authorized for SSO on GitHub
4. If you are given a message saying `proceed (y/n)` type `y` and hit enter. If the installation succeeds, you will get
   the following message:
   ```
    done
    #
    # To activate this environment, use
    #
    #     $ conda activate csds440
    #
    # To deactivate an active environment, use
    #
    #     $ conda deactivate
    ```
5. Now, your conda environment is installed and activated. Any time you want to run code from the command line, make
   sure to activate the environment with `conda activate csds440`. If your environment is active, you will see a
   `(csds440)` to the left of your command line prompt.
6. You'll also want to connect your environment to your IDE. In PyCharm, this is easy to do:
    1. In Preferences, go to *Project: projectname* â†’ *Python Interpreter*.
    2. Select the *Interpreter:* dropdown menu which probably says *<no interpreter>* at the moment and click *Show
       All...*
    3. If an environment called "Python 3.x (csds440)" is listed, select it and click *OK*. Otherwise, click the plus
       "+" button â†’ *Conda Environment* â†’ *Existing Environment* and click the *Interpreter:* dropdown menu. There
       should be an option with `envs/csds440/bin/python` in the name, select that one and click *OK*.
    4. While you're in Preferences, go to *Project Structure* and mark `src` and `test` as source (blue) folders. Also
       mark `440data` as excluded (red).
7. Go into your Terminal or Anaconda Prompt and navigate to the repository root. Run the following commands:
    - `conda develop src`
    - `conda develop test`
    - `conda develop notebooks`
      This will declare your `src` and `notebooks` directories as source folders to avoid those pesky `ModuleNotFound`
      errors.

### Part 4: Celebrate! ðŸŽ‰

You're all set! That wasn't so hard, was it? ðŸ¥³
